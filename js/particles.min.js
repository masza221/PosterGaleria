const canvas=document.querySelector("canvas"),ctx=canvas.getContext("2d"),effect=document.querySelector(".effect-partciples"),canvasHandler=document.querySelector(".photo");canvas.width=canvasHandler.offsetWidth,canvas.height=canvasHandler.offsetHeight;let prevMouse={x:effect.offsetWidth/2,y:effect.offsetHeight/2};const particles=[];class Particle{constructor(a,b,c,d,e){this.x=a,this.y=b,this.velocity=c,this.radius=d,this.color=e}draw(){ctx.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),ctx.fillStyle=this.color,ctx.fill(),ctx.closePath()}update(){this.x+=this.velocity.x,this.y+=this.velocity.y}}function outOfBounds(a){return a.x>canvas.width+a.radius||a.x<-a.radius||a.y>canvas.height+a.radius||a.y<-a.radius}function calcNumber(){switch(!0){case 576>window.innerWidth:return 40;case 768>window.innerWidth:return 50;case 992>window.innerWidth:return 60;default:return 90;}}let settings={particles:{draw:!0,number:calcNumber(),size:2,speed:.6,color:"rgba(255,255,255,0.25)",effects:{followMouse:{active:!0,followBy:.12}}},line:{draw:!0,size:2,radius:100,color:"rgba(255,255,255,0.25)"}};/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(settings.particles.effects.followMouse.active=!1),window.addEventListener("resize",()=>{canvas.width=canvasHandler.offsetWidth,canvas.height=canvasHandler.offsetHeight,settings.particles.number=calcNumber(),particles.length>settings.particles.number?particles.splice(settings.particles.number,particles.length-settings.particles.number):particles.length<settings.particles.number&&addParticles(settings.particles.number-particles.length)});function addParticles(a){for(var b=0;b<a;b++){let a=Math.random()*canvas.width,b=Math.random()*canvas.height;const c={x:(Math.random()*2-1)*settings.particles.speed,y:(Math.random()*2-1)*settings.particles.speed};particles.push(new Particle(a,b,c,settings.particles.size,settings.particles.color))}}function animate(){ctx.clearRect(0,0,canvas.width,canvas.height);for(let a=0;a<particles.length;a++)if(particles[a].update(),particles[a].draw(),outOfBounds(particles[a])&&(particles.splice(a,1),addParticles(1)),(particles[a].x>canvas.width||0>particles[a].x)&&(particles[a].velocity.x=-particles[a].velocity.x),(particles[a].y>canvas.height||0>particles[a].y)&&(particles[a].velocity.y=-particles[a].velocity.y),settings.line.draw)for(let b,c=a;c<particles.length;c++)b=Math.hypot(particles[a].x-particles[c].x,particles[a].y-particles[c].y),b-particles[a].radius-particles[c].radius<settings.line.radius&&(ctx.strokeStyle=settings.line.color,ctx.lineWidth=settings.line.size,ctx.beginPath(),ctx.moveTo(particles[a].x,particles[a].y),ctx.lineTo(particles[c].x,particles[c].y),ctx.stroke(),ctx.closePath());requestAnimationFrame(animate)}canvasHandler.addEventListener("mousemove",a=>{settings.particles.effects.followMouse.active&&setTimeout(()=>{moving=!0;let b=a.clientX-prevMouse.x,c=a.clientY-prevMouse.y;particles.forEach(a=>{a.x+=b*settings.particles.effects.followMouse.followBy,a.y+=c*settings.particles.effects.followMouse.followBy}),prevMouse={x:a.clientX,y:a.clientY}},100)}),addParticles(settings.particles.number),animate();