const defaultLocale="en";let locale,translations={};const switcher=document.querySelector("#lang"),supportedLocales=["en","pl","de","fr"];function getLocalefromStorage(){return localStorage.getItem("locale")}document.addEventListener("DOMContentLoaded",()=>{const a=getLocalefromStorage()||supportedOrDefault(browserLocales(!0));setLocale(a),bindLocaleSwitcher(a)});function isSupported(a){return-1<supportedLocales.indexOf(a)}function supportedOrDefault(a){return a.find(isSupported)||defaultLocale}function browserLocales(a=!1){return navigator.languages.map(b=>a?b.split("-")[0]:b)}function bindLocaleSwitcher(a){switcher.value=a,switcher.onchange=a=>{switcher.disabled=!0,setLocale(a.target.value),localStorage.setItem("locale",a.target.value)}}async function setLocale(a){if(a!==locale){const b=await fetchTranslationsFor(a);locale=a,translations=b,translatePage()}}async function fetchTranslationsFor(a){const b=await fetch(`../langs/${a}.json`);return await b.json()}function translatePage(){document.querySelectorAll("[data-lang]").forEach(translateElement),switcher.disabled=!1}function translateElement(a){const b=a.getAttribute("data-lang"),c=translations[b];a.innerText=c}